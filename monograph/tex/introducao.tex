\section{Motivação e objetivos}
\label{sec:motivacao}

Este projeto apresenta uma implementação da mais recente edição do relatório
reconhecido como \textit{de facto standard} da linguagem de programação
\textit{Scheme}, o \acs{R7RS}, com o objetivo de demonstrar a aderência ao
princípio, definido no plano de ratificação do relatório, que requer que uma
implementação deveria ser possível de ser realizada por um estudante de
graduação em ciência da computação como meio de pesquisa e aprendizado sobre
linguagens de programação sem a necessidade de técnicas demasiado avançadas.

Scheme é uma linguagem de programação da família Lisp, que difere dos outros
dialetos Lisp  mais conhecidos (como \textit{Common Lisp} e \textit{Emacs
Lisp}) por utilizar uma estratégia de escopo totalmente léxico, possuir
continuações como objetos de primeira classe, e compartilhar o espaço de nomes
entre funções e variáveis. Também se destaca por manter um considerável foco em
minimalismo, preferindo primitivas poderosas e altamente ortogonais, que podem
ser utilizadas para criar novas expressões compostas, a complexas
funcionalidades especializadas[1].

Por causa destas características, \textit{Scheme} foi se tornando ao longo do
tempo uma plataforma bastante utilizada para o ensino de conceitos de
linguagens de programação e computação. Em especial, a facilidade de
implementar novos conceitos e funcionalidades sobre a linguagem base
pré-definida fez com que Scheme fosse bastante utilizado no estudo exploratório
de novos conceitos de linguagens de programação, tanto como linguagem utilizada
em cursos iniciais de computação e programação, inclusive em cursos de nível
médio[2][3][6], bem como meio de discussão na literatura da área de projeto de
linguagens de programação e design de interpretadores.

O crescimento de \textit{Scheme} dentro da comunidade acadêmica, inclinando-se
para as capacidades da linguagem como plataforma de ensino e pesquisa de
linguagens de programação e suas implementações contribuíram para que, de forma
tácita, os comitês responsáveis pelas evoluções da linguagem da década de 1970
até a publicação da quinta revisão, conhecida como \acs{R5RS} em 1998 dessem
grande importância à possibilidade de a linguagem ser implementada tanto de
forma eficiente e sofisticada, quanto por um aluno, como estudo, dentro do
currículo de um curso de graduação em ciência da computação.

Em 2007 um novo processo de revisão da linguagem foi concluído, dando origem ao
relatório \acs{R6RS}. Este relatório tinha a ambição de criar uma linguagem
mais completa e próxima das necessidades de desenvolvimento de aplicações
demandadas pelo mercado de desenvolvimento de sistemas, o que acabou por
distanciá-lo significativamente dos objetivos que nortearam o desenvolvimento
até o \acs{R5RS}. Aliando a este distanciamento a algumas pequenas
incompatibilidades com a profusão de implementações de \textit{Scheme}
existentes, o relatório \acs{R6RS} foi largamente ignorado pelos responsáveis
por algumas das mais utilizadas implementações da época, causando grande
controvérsia entre a comunidade de implementadores de \textit{Scheme} ao redor
do mundo[9].

Como resultado desta divisão na comunidade, em 2009 iniciou-se um novo esforço
para revisão da linguagem: o novo relatório chamado \acs{R7RS}. Para evitar os
problemas anteriores foi decidido que a evolução da linguagem se daria em duas
frentes: uma linguagem ``pequena'' (posteriormente nomeada simplesmente
\acs{R7RS}-small), guiada pelos princípios de minimalismo que historicamente
foram seguidos, e uma linguagem ``grande'' (\acs{R7RS}-large), baseada na
R7RS-small com a intenção de levá-la em direção aos objetivos mal sucedidos do
\acs{R6RS}[10]. 

O processo de ratificação da \acs{R7RS}-small está próximo do fim, com o draft
mais recente tendo sido publicado em março de 2011[11], enquanto a linguagem
\acs{R7RS}-large foi deixada para definição futura pelo fato de todos os
participantes do grupo de trabalho dedicado à \acs{R7RS}-large também fazerem
parte do grupo de trabalho dedicado à \acs{R7RS}-small e preferirem terminar o
trabalho de base antes de iniciar o trabalho mais completo nas camadas acima.

O histórico da baixa aceitação do \acs{R6RS} demonstra que uma linguagem que
rompa muito com as necessidades dos grupos interessados em utilizar
\textit{Scheme} como uma linguagem de pesquisa e ensino tem pouca probabilidade
de ser amplamente implementada pela comunidade.

Inserido neste contexto, este trabalho é uma tentativa de demonstrar a
aderência aos princípios de minimalismo e capacidade de implementação de
\textit{Scheme} como objeto de estudo de alunos de graduação em ciência da
computação por meio da apresentação de uma implementação, e das técnicas
envolvidas nesta, da linguagem como descrita até o momento pelo terceiro
\textit{draft}. Deixando de lado os diversos pequenos módulos opcionais
descritos no relatório, esta implementação se foca no módulo ``\texttt{base}'',
obrigatório para uma implementação \textit{Scheme}.


\section{Trabalhos relacionados}
\label{sec:trabalhos_relacionados}

Até o momento da conclusão deste trabalho, apenas duas outras tentativas de
implementar o conteúdo dos drafts da \acs{R7RS}-small foram encontradas:
\textit{chibi-scheme}, criada por Alex Shinn, presidente do grupo de trabalho
responsável pelo \acs{R7RS}-small[15]; e \textit{r7rs-bridge} criada por
Okumura Yuki[16].

Os objetivos destas, no entanto, diferem significativamente deste trabalho:

\subsection{Chibi Schemee}
\label{sub:chibi_scheme}

Chibi Scheme é uma tentativa de implementar a linguagem R7RS-small (além de
alguns dialetos mais antigos como o R5RS) como uma biblioteca de extensão e
linguagem de script para programas em C. Seu foco principal está em diminuir o
tamanho do executável final e aumentar a performance. Embora o código seja
relativamente bem comentado, não há qualquer intenção de escolher
funcionalidades e estratégias pensando na simplicidade de implementação em
detrimento dos objetivos citados acima. Desta forma, Chibi Scheme não é uma
implementação viável para demonstração da capacidade de se implementar a
linguagem R7RS-small como objeto de estudo.


\subsection{R⁷RS Bridge}
\label{sub:r7rs_bridge}

R7RS-Bridge, de fato, é uma tentativa completamente diferente, focada em
desenvolver uma linguagem compatível com R7RS-small através de bibliotecas para
sistemas Scheme R6RS. Este pré-requisito em ter uma implementação anterior do
R6RS, o relatório considerado complicado demais pela comunidade Scheme,
claramente coloca as intenções de R7RS-Bridge distantes de uma implementação de
R7RS-small como objeto de estudo.

\section{Estrutura da monografia}
\label{sec:estrutura_da_monografia}

O capítulo \ref{cap:scheme} descreve a linguagem \textit{Scheme} e suas
funcionalidades mais notáveis, que a diferenciam da maior parte das linguagens
de uso geral em amplo uso atualmente.

O capítulo \ref{cap:estrategia} descreve as estratégias utilizadas na
implementação deste trabalho, e está dividido nas seções descritas as seguir:

\begin{itemize}

\item A seção \ref{sec:memoria} descreve a estrutura interna utilizada para
representar valores no interpretador, bem como as estratégias utilizadas para
reutilização de memória de objetos impossíveis de serem utilizados pelo
programa;

\item A seção \ref{sec:leitor} descreve o leitor, uma fase tradicional da
compilação de programas Lisp que corresponde à análise léxica e parte da
análise sintática;

\item A seção \ref{sec:compilador} descreve o compilador, que implementa o
restante da análise sintática e gera código para uma máquina virtual simples;

\item A seção \ref{sec:maquina-virtual} descreve a arquitetura da máquina
virtual implementada, seus registradores e instruções;

%%% TODO: To be continued...

\end{itemize}

